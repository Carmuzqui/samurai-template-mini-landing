<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Samurai Profile</title>
  <style>
    /* Completely redesigned to match the clean white design from the image */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #f5f5f5;
      color: #333;
      min-height: 100vh;
      padding: 20px;
    }
    
    .profile-container {
      max-width: 600px;
      margin: 0 auto;
      background: white;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }
    
    .header {
      background: linear-gradient(135deg, #635BFF 0%, #4CAF50 100%);
      padding: 40px;
      position: relative;
      display: flex;
      align-items: center;
      gap: 30px;
    }
    
    .profile-photo {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      object-fit: cover;
      border: 4px solid white;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
    
    .header-info {
      flex: 1;
    }
    
    .name {
      font-size: 36px;
      font-weight: 700;
      color: white;
      margin-bottom: 8px;
      line-height: 1.2;
    }
    
    .title {
      font-size: 18px;
      color: #635BFF;
      font-weight: 600;
      background: rgba(255,255,255,0.9);
      padding: 5px 15px;
      border-radius: 20px;
      display: inline-block;
    }
    
    .content {
      padding: 40px;
    }
    
    .description {
      font-size: 16px;
      line-height: 1.6;
      color: #666;
      margin-bottom: 40px;
    }
    
    .metrics {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 40px;
    }
    
    .metric-card {
      background: white;
      border-radius: 15px;
      padding: 30px;
      text-align: center;
      box-shadow: 0 5px 15px rgba(0,0,0,0.08);
      border: 1px solid #f0f0f0;
    }
    
    .metric-icon {
      font-size: 24px;
      margin-bottom: 10px;
      display: block;
    }
    
    .metric-value {
      font-size: 32px;
      font-weight: 700;
      display: block;
      margin-bottom: 8px;
      color: #333;
    }
    
    .metric-label {
      font-size: 14px;
      color: #666;
      font-weight: 500;
    }
    
    .rating-stars {
      color: #FF9800;
      font-size: 20px;
      margin-bottom: 5px;
    }
    
    .projects-icon {
      color: #4CAF50;
    }
    
    .skills-section {
      margin-bottom: 30px;
    }
    
    .skills-title {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 20px;
      color: #333;
    }
    
    .skills-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 12px;
    }
    
    .skill-badge {
      background: #635BFF;
      color: white;
      border-radius: 25px;
      padding: 12px 20px;
      text-align: center;
      font-size: 14px;
      font-weight: 500;
    }
    
    .contact-btn {
      width: 100%;
      background: #4CAF50;
      border: none;
      border-radius: 25px;
      padding: 15px;
      color: white;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      display: none;
    }
    
    .contact-btn:hover {
      background: #45a049;
    }
    
    @media (max-width: 768px) {
      .header {
        flex-direction: column;
        text-align: center;
        gap: 20px;
      }
      
      .profile-photo {
        width: 100px;
        height: 100px;
      }
      
      .name {
        font-size: 28px;
      }
      
      .content {
        padding: 30px 20px;
      }
      
      .metrics {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="profile-container">
    <header class="header">
      <img class="profile-photo" src="/placeholder.svg?height=120&width=120" alt="Foto de perfil" id="profilePhoto">
      <div class="header-info">
        <h1 class="name" id="profileName">Nombre del Samurai</h1>
        <h2 class="title" id="profileTitle">Especialidad Profesional</h2>
      </div>
    </header>
    
    <div class="content">
      <p class="description" id="profileDescription">Descripci√≥n profesional del freelancer especializado en su √°rea de expertise.</p>
      
      <section class="metrics">
        <div class="metric-card">
          <div class="rating-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          <span class="metric-value" id="profileRating">5.0</span>
          <span class="metric-label">Calificaci√≥n</span>
        </div>
        <div class="metric-card">
          <div class="projects-icon">üéÅ</div>
          <span class="metric-value" id="profileProjects">0</span>
          <span class="metric-label">Proyectos Completados</span>
        </div>
      </section>
      
      <section class="skills-section">
        <h3 class="skills-title">Especialidades</h3>
        <div class="skills-grid" id="skillsContainer">
          <div class="skill-badge">Habilidad 1</div>
          <div class="skill-badge">Habilidad 2</div>
          <div class="skill-badge">Habilidad 3</div>
        </div>
      </section>
      
      <button class="contact-btn" id="contactBtn">
        üí¨ Conectar por WhatsApp
      </button>
    </div>
  </div>

  <script>
    function base64UrlDecode(str) {
      try {
        // Replace URL-safe characters
        str = str.replace(/-/g, '+').replace(/_/g, '/');
        // Add padding if needed
        while (str.length % 4) {
          str += '=';
        }
        const decoded = JSON.parse(atob(str));
        return decoded;
      } catch (e) {
        console.error('Error decoding data:', e);
        return null;
      }
    }

    function renderProfile(data) {
      if (!data) return;
      
      // Update basic info
      if (data.name) document.getElementById('profileName').textContent = data.name;
      if (data.title) document.getElementById('profileTitle').textContent = data.title;
      if (data.description) document.getElementById('profileDescription').textContent = data.description;
      
      // Update rating with proper star display
      if (data.rating) {
        const rating = parseFloat(data.rating);
        document.getElementById('profileRating').textContent = rating.toFixed(1);
        
        // Update stars based on rating
        const starsContainer = document.querySelector('.rating-stars');
        const fullStars = Math.floor(rating);
        const hasHalfStar = rating % 1 >= 0.5;
        let starsHTML = '';
        
        for (let i = 0; i < 5; i++) {
          if (i < fullStars) {
            starsHTML += '‚òÖ';
          } else if (i === fullStars && hasHalfStar) {
            starsHTML += '‚òÜ';
          } else {
            starsHTML += '‚òÜ';
          }
        }
        starsContainer.innerHTML = starsHTML;
      }
      
      if (data.projects) document.getElementById('profileProjects').textContent = data.projects;
      
      // Update photo
      if (data.photo) {
        document.getElementById('profilePhoto').src = data.photo;
        document.getElementById('profilePhoto').alt = `Foto de ${data.name || 'perfil'}`;
      }
      
      // Update skills
      if (data.skills && Array.isArray(data.skills) && data.skills.length > 0) {
        const container = document.getElementById('skillsContainer');
        container.innerHTML = '';
        data.skills.forEach(skill => {
          const badge = document.createElement('div');
          badge.className = 'skill-badge';
          badge.textContent = skill;
          container.appendChild(badge);
        });
      }
      
      // Update WhatsApp contact
      if (data.whatsapp) {
        const btn = document.getElementById('contactBtn');
        btn.style.display = 'block';
        btn.onclick = () => {
          const phone = data.whatsapp.replace(/\D/g, ''); // Remove non-digits
          window.open(`https://wa.me/${phone}`, '_blank');
        };
      }
    }

    document.addEventListener('DOMContentLoaded', function() {
      const urlParams = new URLSearchParams(window.location.search);
      const encodedData = urlParams.get('data') || urlParams.get('d'); // Support both 'data' and 'd' parameters
      
      if (encodedData) {
        const userData = base64UrlDecode(encodedData);
        if (userData) {
          renderProfile(userData);
        }
      }
    });
  </script>
</body>
</html>
